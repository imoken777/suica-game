(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8697)}])},8697:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return a}});var i=t(5893),o=t(9842),n=t.n(o),l=t(7294);let c=[{categoryBit:2,radius:20,color:"#FF0000"},{categoryBit:4,radius:30,color:"#FFA500"},{categoryBit:8,radius:40,color:"#FFFF00"},{categoryBit:16,radius:50,color:"#00FF00"},{categoryBit:32,radius:60,color:"#0000FF"},{categoryBit:64,radius:70,color:"#4B0082"},{categoryBit:128,radius:80,color:"#EE82EE"},{categoryBit:256,radius:90,color:"#FFC0CB"},{categoryBit:512,radius:100,color:"#00FFFF"},{categoryBit:1024,radius:110,color:"#000000"},{categoryBit:2048,radius:120,color:"#FFFFFF"}];var a=()=>{let[e,r]=(0,l.useState)(c[0]),t=(0,l.useRef)(null),a=(0,l.useRef)(null),s=(0,l.useRef)(null),u=(0,l.useRef)(null),d=e=>{let r=c.findIndex(r=>r.categoryBit===e);if(-1===r)return c[0];let t=(r+1)%c.length;return c[t]},g=(e,r,t)=>{a.current&&o.Composite.add(a.current,o.Bodies.circle(e,r,t.radius,{collisionFilter:{category:t.categoryBit,mask:1|c.map(e=>e.categoryBit).reduce((e,r)=>e|r)},render:{fillStyle:t.color}}))};return(0,l.useEffect)(()=>{let e=n().Engine,r=n().Render,i=n().Composite,l=n().MouseConstraint,y=n().Mouse,F=n().Events,f=n().Bodies,p=e.create();t.current=p,a.current=p.world;let h=window.innerWidth,B=window.innerHeight,m=u.current,E=null;if(u.current&&(E=r.create({element:u.current,engine:p,options:{width:h,height:B,wireframes:!1}})),!E)return;r.run(E);let w=n().Runner.create();n().Runner.run(w,p),i.add(a.current,f.rectangle(h/2,B-10,h,10,{collisionFilter:{category:1,mask:c.map(e=>e.categoryBit).reduce((e,r)=>e|r)},isStatic:!0,render:{fillStyle:"red",lineWidth:1}})),i.add(a.current,f.rectangle(5,B/2,10,B,{collisionFilter:{category:1},isStatic:!0,render:{fillStyle:"transparent",lineWidth:1}})),i.add(a.current,f.rectangle(h-5,B/2,10,B,{collisionFilter:{category:1},isStatic:!0,render:{fillStyle:"transparent",lineWidth:1}})),i.add(a.current,f.rectangle(h/2,5,h,10,{collisionFilter:{category:3},isStatic:!0,render:{fillStyle:"transparent",lineWidth:1}}));let v=y.create(E.canvas),_=l.create(p,{mouse:v,constraint:{stiffness:.2,render:{visible:!1}},collisionFilter:{category:0}});return i.add(a.current,_),s.current=_,F.on(p,"collisionStart",e=>{e.pairs.forEach(e=>{let{bodyA:r,bodyB:t}=e;if(1!==r.collisionFilter.category&&1!==t.collisionFilter.category&&r.collisionFilter.category===t.collisionFilter.category){a.current&&(o.World.remove(a.current,r),o.World.remove(a.current,t));let e=(r.position.x+t.position.x)/2,i=(r.position.y+t.position.y)/2;if(void 0!==r.collisionFilter.category){let t=d(r.collisionFilter.category);g(e,i,t)}}})}),F.on(p,"collisionActive",e=>{e.pairs.forEach(e=>{let{bodyA:r,bodyB:t}=e;(3===r.collisionFilter.category||3===t.collisionFilter.category)&&console.log("game over")})}),r.lookAt(E,{min:{x:0,y:0},max:{x:h,y:B}}),e.run(p),r.run(E),()=>{E&&(r.stop(E),n().Runner.stop(w),m&&(m.innerHTML=""))}},[]),(0,l.useEffect)(()=>{let t=s.current,i=t=>{let i=t.mouse.position;g(i.x,100,e),r(c[Math.floor(8*Math.random())])};return t&&o.Events.on(t,"mousedown",i),()=>{t&&o.Events.off(t,"mousedown",i)}},[e]),(0,i.jsx)("div",{children:(0,i.jsx)("div",{ref:u})})}}},function(e){e.O(0,[611,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);